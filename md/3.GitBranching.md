# 3. Ветвление в Git #

## 3.1 О ветвлении в двух словах ##

### О ветвлении в двух словах ###

Когда вы делаете коммит, Git сохраняет его в виде объекта, который содержит указатель на снимок (snapshot) подготовленных данных. Этот объект так же содержит имя автора и email, сообщение и указатель на коммит или коммиты непосредственно предшествующие данному (его родителей): отсутствие родителя для первоначального коммита, один родитель для обычного коммита, и несколько родителей для результатов слияния двух и более веток.

Когда вы создаёте коммит командой git commit, Git вычисляет контрольные суммы каждого подкаталога и сохраняет его в репозитории как объект дерева каталогов. Затем Git создаёт объект коммита с метаданными и указателем на основное дерево проекта для возможности воссоздать этот снимок в случае необходимости.

Если вы сделаете изменения и создадите ещё один коммит, то он будет содержать указатель на предыдущий коммит.

Ветка в Git — это простой перемещаемый указатель на один из таких коммитов. По умолчанию, имя основной ветки в Git — `master`. Как только вы начнёте создавать коммиты, ветка `master` будет всегда указывать на последний коммит. Каждый раз при создании коммита указатель ветки `master` будет передвигаться на следующий коммит автоматически.

> **Примечание.**
> Ветка `master` в Git — это не какая-то особенная ветка. Она точно такая же, как и все остальные ветки. Она существует почти во всех репозиториях только лишь потому, что её создаёт команда `git init`, а большинство людей не меняют её название.

#### Создание новой ветки ####

При создании ветки всего лишь создаётся новый указатель для дальнейшего перемещения. Допустим вы хотите создать новую ветку с именем `testing`. Вы можете это сделать командой `git branch` :

```bash
git branch testing
```

В результате создаётся новый указатель на текущий коммит.

Специальный указатель `HEAD` — это указатель на текущую локальную ветку. Вы можете легко это увидеть при помощи простой команды `git log`, которая покажет вам куда указывают указатели веток. Эта опция называется `--decorate`.

```bash
git log --oneline --decorate
```

#### Переключение веток ####

Для переключения на существующую ветку выполните команду `git checkout`. Давайте переключимся на ветку `testing`:

```bash
git checkout testing
```

В результате указатель `HEAD` переместится на ветку `testing`.

> **Примечание.**
> `git log` не показывает все ветки по умолчанию
> Если выполнить команду `git log` прямо сейчас, то в её выводе только что созданная ветка `testing` фигурировать не будет.
> Ветка никуда не исчезла; просто Git не знает, что именно она вас интересует, и выводит наиболее полезную по его мнению информацию. Другими словами, по умолчанию `git log` отобразит историю коммитов только для текущей ветки.
> Для просмотра истории коммитов другой ветки необходимо явно указать её имя: `git log testing` Чтобы посмотреть историю по всем веткам — выполните команду с дополнительным флагом: `git log --all`.

> **Одновременное создание новой ветки и переключение на неё.**
> Как правило, при создании новой ветки вы хотите сразу на неё переключиться — это можно сделать используя команду `git checkout -b <newbranchname>`.

> **Начиная с Git версии 2.23, вы можете использовать `git switch` вместо `git checkout`, чтобы:**
> Переключиться на существующую ветку: `git switch testing-branch`.
> Создать новую ветку и переключиться на нее: `git switch -c new-branch`. Флаг `-c` означает создание, но также можно использовать полный формат:` --create`.
> Вернуться к предыдущей извлечённой ветке: `git switch -`.